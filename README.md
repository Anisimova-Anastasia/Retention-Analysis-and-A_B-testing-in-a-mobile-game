# Анализ Retention и A/B-тестирование в мобильной игре

Проект посвящен анализу ключевых метрик мобильной игры, включая расчет Retention Rate и оценку результатов A/B-теста акционных предложений.

---

## Исходные данные

### Описание таблиц и полей

**Таблица `reg_data` (данные о регистрации):**
- `reg_ts` — timestamp регистрации пользователя (в секундах)
- `uid` — уникальный идентификатор пользователя
- `registration_time` — дата и время регистрации (преобразовано из timestamp)
- `registration_date` — дата регистрации

**Таблица `auth_data` (данные о входах в игру):**
- `auth_ts` — timestamp входа в игру (в секундах)
- `uid` — уникальный идентификатор пользователя
- `time_to_game` — дата и время входа (преобразовано из timestamp)
- `auth_date` — дата входа

**Таблица `A_B_test` (данные A/B-теста):**
- `user_id` — уникальный идентификатор пользователя
- `revenue` — сумма платежа
- `testgroup` — группа тестирования (`a` — контрольная, `b` — тестовая)
- `is_active` — флаг платящего пользователя

---

## Цели исследования

1. Разработать функцию для расчета Retention Rate игроков.
2. Оценить эффективность двух наборов акционных предложений через A/B-тест.
3. Определить, какой набор предложений показывает лучшие результаты.
4. Предложить метрики для оценки тематических событий в игре.

---

## Основные задачи

1. **Retention Analysis:**
   - Расчет Retention Rate по дням от даты регистрации.
   - Визуализация динамики удержания игроков.

2. **A/B-тестирование:**
   - Сравнение ключевых метрик:
     - ARPU (Average Revenue Per User)
     - ARPPU (Average Revenue Per Paying User)
     - CR (Conversion Rate)
   - Проверка статистической значимости различий.

3. **Статистический анализ:**
   - Проверка нормальности распределения (тест Д'Агостино-Пирсона).
   - Проверка равенства дисперсий (тест Левена).
   - t-критерий Стьюдента и U-критерий Манна-Уитни.

4. **Визуализация:**
   - Распределение платежей по группам.
   - Сравнение метрик между группами.

---

## Библиотеки и инструменты

- **Python** — основной язык программирования.
- **Pandas** — обработка и анализ данных.
- **Matplotlib/Seaborn** — визуализация данных.
- **SciPy/StatsModels** — статистические тесты.
- **Pingouin** — расширенные статистические методы.
- **Jupyter Notebook** — среда выполнения анализа.

---

## Реализация проекта

1. **Предобработка данных:**
   - Проверка на дубликаты и пропуски, преобразовагие данных

2. **Расчет Retention:**
   - Разработка функции `Nday_retention` для когортного анализа.

3. **A/B-тестирование:**
   - Анализ распределения пользователей по группам.
   - Расчет ARPU, ARPPU и CR для каждой группы.
   - Проверка статистической значимости различий.

4. **Визуализация:**
   - Гистограммы распределения платежей.
   - Логарифмические шкалы для наглядности.
   - Сравнение метрик через боксплоты.

---

## Результаты

### A/B-тест:
- **ARPU:**
  - Группа A: 25.41
  - Группа B: 26.75 (+5.3%)
  - Различия **не статистически значимы** (p-value = 0.5325).
- **ARPPU:**
  - Группа A: 2664.0
  - Группа B: 3003.66 (+12.7%)
  - Различия **не значимы** (p-value = 0.1002).
- **CR:**
  - Группа A: 0.95%
  - Группа B: 0.89% (-6.7%)
  - Различия **значимы** (p-value = 0.035), но размер эффекта мал (Cohen’s h = 0.007).

---

## Вывод

1. **A/B-тест:**
   - **Нет значимых различий** между группами по ARPU и ARPPU.
   - Конверсия (CR) в группе B ниже, но разница не имеет практического смысла.
   - Наблюдаемые +5% к ARPU могут быть связаны с выбросами в группе A.

2. **Рекомендации:**
   - Отказаться от внедрения изменений группы B.
   - Перезапустить тест с контролем распределения "китов".
   - Увеличить длительность теста для повышения мощности анализа.

**Итог:** Изменения не показали значимых улучшений. Требуется дополнительное исследование.
